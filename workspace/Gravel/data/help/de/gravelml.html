<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">

<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Gravel - Hilfe - GravelML</title>
	<meta name="generator" content="TextMate http://macromates.com/">
	<meta name="author" content="Ronny">
	<!-- Date: 2007-10-12 -->
</head>
<body>
<div align=center><a name="title"><h2>GravelML</h2></a></div>
<p>Das Format, in dem Gravel Graphen speichert, basiert auf GraphML<sup>1</sup>, einem XML-Format für Graphen, und heißt <b>GravelML</b>.<br>
<a name="abs1">Ein</a> in GravelML gespeicherter Graph ist analog zur Datenstruktur entweder der reine mathematische Graph, oder er enthält alle visuellen informationen.<br>
GraphML wurde um das <tt><code>&#x003C;subset&#x003E;</code></tt>-Tag innerhalb eines Graphen erweitert. Das Tag enthält einen Untergraphen. Dieser wird durch Referenzen auf die enthaltenen Knoten und Kanten gespeichert.<br>
Die Dokumenttypdefinition gravelml.dtd, ebenso eine Adaption von GraphML, erweitert die Strukturdefinition um diese Informationen. Die Datei liegt online unter <i>http://gravel.darkmoonwolf.de/gravelml.dtd</i>. Ist bei Benutzung von Gravel kein Internet verfügbar, kann die Dokumenttypdefinition ebenso im gleichen Verzeichnis platziert werden. Dann muss in der GravelML-Datei so verändert werden, dass anstelle der Internet-Adresse lediglich <tt><code>gravelml.dtd</code></tt> dort steht<sup>2</sup>.<br>
Enthält ein Graph keine Untergraphen, so entspricht die Datei dem GraphML-Format mit Ausnahme einiger Datenschlüssel. Nach deren Entfernen lässt sich die Datei für GraphML verwenden, indem die Dokumenttypdefinition ersetzt wird.</p>
<br><br>
<a name="abs2"><b>Datenschlüssel</b></a><br>
<p>Datenschlüssel werden direkt vor dem Graphen definiert. Sie erweitern Elemente des Graphen um Eigenschaften. Definiert werden diese durch den <tt><code><key></code></tt>-Tag. Die <i>id</i> ermöglichst später den Zugriff. Das Attribut <i>for</i>} gibt an, für welches Element dies ist. Zusätzlich sind ein Name und ein Datentyp anzugeben. Für GravelML existieren die <a href="#keys">unten aufgeführten Schlüssel</a>. Es kann ein Standardwert festgelegt werden. Ist dieser nicht gegeben, muss der Datenschlüssel in jedem Element, für das er definiert ist, angegeben werden. Der folgende Datenschlüssel erweitert den Knoten um eine Größe. Wird bei einem Knoten keine Größe angegeben, erhält dieser den Standardwert 6:</p>                           
<br><pre><code>
1 	&#x003Ckey id="ns" for="node" attr.name="size" attr.type="integer"&#x003E;
2 	&#x003C;default&#x003E;6&#x003C;/default&#x003E;
3 	&#x003C;/key&#x003E;
</code></pre><br>
<p>In einem Knoten kann dann dieser Datenschlüssel explizit gesetzt werden. Dies geschieht durch Verwendung des <tt><code><data></code></tt>-Tags. Mit dem <i>key</i>-Attribut wird die Id des Datenschlüssels angegeben. Im folgenden Beispiel wird dem erste Knoten so eine Größe von 8 explizit zugewiesen (Zeile 2), der Zweite erhält den Standard-Wert implizit, da er keine Größenangabe enthält (Zeile 4)</p>:
<br><pre><code>
1 &#x003C;node id="node1"&#x003E;
2 	&#x003C;data key="ns"&#x003E;8&#x003C;/data&#x003E;
3 &#x003C;/node&#x003E;
4 &#x003C;node id="node2" /&#x003E;
</code></pre><br>
<p>Während des Speicherns werden jeweils nur die Datenschlüssel in einem Knoten, einer Kante oder einem Untergraphen angegeben, die von der allgemeinen Einstellung abweichen. So lässt sich recht einfach in einer Datei die Knotengröße ändern, wenn alle Knoten den Standardwert besitzen.</p>
<br><br>
<a name="keys"><b>in GravelML verwendete Datenschlüssel</b></a><br>
In einem mathematischen Graphen sind folgende Datenschlüssel notwendig:
<table border="0" cellspacing="5" cellpadding="5">
<tr><th>id</th><th>im Element</th><th>Name</th><th>Typ</th><th>Kommentar</th></tr>
<tr><td>gt </td><td> graph </td><td> type </td><td> String </td><td> Gibt den Graphentyp an (math oder visual) </td></tr>
<tr><td>en </td><td> edge </td><td> name </td><td> String </td><td> Name der Kante</td></tr>
<tr><td>ev </td><td> edge </td><td> value </td><td> Integer </td><td> Das Gewicht einer Kante </td></tr>
<tr><td>nn </td><td> node </td><td> name </td><td> String </td><td> Name eines Knotens</td></tr>
<tr><td>sn </td><td> subset </td><td> name </td><td> String </td><td> Name eines Untergraphen</td></tr>
</table>
Dabei werden die Namen jeweils beim Laden um die Id der Knotens bzw. des Untergraphen ergänzt.<br><br>
Zusätzlich müssen in einem visuellen Graphen folgende Datenschlüssel existieren:<br>
<table border="0" cellspacing="5" cellpadding="5">
<tr><th>id</th><th>im Element</th><th>Name</th><th>Typ</th><th>Kommentar</th></tr>
<tr><td>nx </td><td> node </td><td> x </td><td> Integer </td><td> X-Position eines Knotens </td></tr>
<tr><td>ny </td><td> node </td><td> y </td><td> Integer </td><td> Y-Position eines Knotens </td></tr> 
<tr><td>ns </td><td> node </td><td> size </td><td> Integer </td><td> Größe eines Knotens </td></tr>
<tr><td>nd </td><td> node </td><td> name_distance </td><td> Integer </td><td> Abstand des Names v. Mittelpunkt </td></tr>
<tr><td>nr </td><td> node </td><td> name_orientation </td><td> integer </td><td> Richtung in Grad </td></tr>
<tr><td>nns </td><td> node </td><td> name_size </td><td> Integer </td><td> Schriftgröße des Namens </td></tr>
<tr><td>nnv </td><td> node </td><td> name_visible </td><td> Boolean </td><td> Sichtbarkeit des Namens </td></tr>
<tr><td>ew </td><td> edge </td><td> width </td><td> Integer </td><td> Kantendicke </td></tr>
<tr><td>es </td><td> edge </td><td> arrsize </td><td> Float </td><td> Größe des Pfeils </td></tr>
<tr><td>ep </td><td> edge </td><td> arrpart </td><td> Float </td><td> Füllbreite </td></tr>
<tr><td>eapos </td><td> edge </td><td> arrpos </td><td> Float </td><td> Poisition entlang der Kante </td></tr>
<tr><td>ea </td><td> edge </td><td> arralpha </td><td> Float </td><td> Winkel in der Pfeilspitze </td></tr>
<tr><td>et </td><td> edge </td><td> type </td><td> String </td><td> Kantentyp </td></tr>
<tr><td>etp </td><td> edge </td><td> text_position </td><td> Integer </td><td> Position des Textes an der Kante </td></tr>
<tr><td>etd </td><td> edge </td><td> text_distance </td><td> Integer </td><td> Abstand von der Kante</td></tr>
<tr><td>ets </td><td> edge </td><td> text_size </td><td> Integer </td><td> Textgr&ouml;&szlig;e </td></tr>
<tr><td>etv </td><td> edge </td><td> text_visible </td><td> Boolean </td><td> Sichtbarkeit des Kantentextes </td></tr>
<tr><td>etw </td><td> edge </td><td> text_showvalue </td><td> Boolean </td><td> Typ des Textes: Kantenwert oder Kantenname</td></tr>
<tr><td>ex </td><td> edge </td><td> x </td><td> Integer </td><td> Kantenkontrollpunkt x </td></tr>
<tr><td>ey </td><td> edge </td><td> y </td><td> integer </td><td> Kantenkontrollpunkt y </td></tr>
<tr><td>sr </td><td> subset </td><td> color.r </td><td> Integer </td><td> Farbe des Untergraphen, Rot-Anteil </td></tr>
<tr><td>sg </td><td> subset </td><td> color.g </td><td> Integer </td><td> Farbe des Untergraphen, Grün-Anteil </td></tr>
<tr><td>sb </td><td> subset </td><td> color.b </td><td> Integer </td><td> Farbe des Untergraphen, Blau-Anteil </td></tr>
</table>
<br><br>
<a name="example"><b>Beispiel einer GravelML-Datei</b></a><br>
<p>Die folgende GravelML Datei enthält den Graphen aus der <a href="definitions.html#Abb3">Abbildung 3</a> in den <a href="definitions.html#vis">Definitionen zur Visualisierung</a>.<br>
<pre<code>
1 &#x003C;?xml version="1.0" encoding="UTF-8"?&#x003E;
2 &#x003C;!DOCTYPE graphml SYSTEM "http://gravel.darkmoonwolf.de/gravelgraphml.dtd"&#x003E;
3  &#x003C;graphml&#x003E;
4 &#x003C;!--[...] --&#x003E;
5 &#x003C;!--Datenschluessel mit Standard-Werten zur Platzersparnis ausgelassen, siehe Ordner examples/ fuer Details --&#x003E;
6 &#x003C;!--[...] --&#x003E;
7 &#x003C;!--der eigentliche Graph, alle Werte die dem Standard entsprechen koennen ausgelassen werden--&#x003E;
8 	&#x003C;graph id="G" edgedefault="undirected"&#x003E;
9 		&#x003C;data key="gt"&#x003E;visual&#x003C;/data&#x003E;
10		&#x003C;node id="node1"&#x003E;
11			&#x003C;data key="nx"&#x003E;46&#x003C;/data&#x003E;
12			&#x003C;data key="ny"&#x003E;13&#x003C;/data&#x003E;
13		&#x003C;/node&#x003E;
14		&#x003C;node id="node2"&#x003E;
15			&#x003C;data key="nx"&#x003E;76&#x003C;/data&#x003E;
16			&#x003C;data key="ny"&#x003E;46&#x003C;/data&#x003E;
17		&#x003C;/node&#x003E;
18		&#x003C;node id="node3"&#x003E;
19			&#x003C;data key="nx"&#x003E;76&#x003C;/data&#x003E;
20			&#x003C;data key="ny"&#x003E;97&#x003C;/data&#x003E;
21		&#x003C;/node&#x003E;
22		&#x003C;node id="node4"&#x003E;
23			&#x003C;data key="nx"&#x003E;12&#x003C;/data&#x003E;
24			&#x003C;data key="ny"&#x003E;96&#x003C;/data&#x003E;
25			&#x003C;data key="nr"&#x003E;180&#x003C;/data&#x003E;
26		&#x003C;/node&#x003E;
27		&#x003C;node id="node5"&#x003E;
28			&#x003C;data key="nx"&#x003E;12&#x003C;/data&#x003E;
29			&#x003C;data key="ny"&#x003E;46&#x003C;/data&#x003E;
30			&#x003C;data key="nr"&#x003E;180&#x003C;/data&#x003E;
31		&#x003C;/node&#x003E;
32
33		&#x003C;edge id="edge4" source="node4" target="node5" /&#x003E;
34		&#x003C;edge id="edge5" source="node5" target="node1" /&#x003E;
35		&#x003C;edge id="edge1" source="node1" target="node2" /&#x003E;
36		&#x003C;edge id="edge7" source="node4" target="node2" /&#x003E;
37		&#x003C;edge id="edge2" source="node2" target="node3" /&#x003E;
38		&#x003C;edge id="edge3" source="node4" target="node3" /&#x003E;
39		&#x003C;edge id="edge6" source="node5" target="node2" /&#x003E;
40	&#x003C;/graph&#x003E;
41 &#x003C;/graphml&#x003E;        
	</code></pre><br><br>
<hr>
<sup>1</sup> GraphML unterliegt einer Common-License, siehe <a href="license.html">Lizenzbestimmungen</a>
<br><br>
<sup>2</sup> Aufgrund von Änderungen an der Klasse <tt><code>Java.Net.Url</code></tt> ist die Offline-Variante der Dokumenttypdefintion mit Java 1.6 nicht möglich.	
</body>
</html>
